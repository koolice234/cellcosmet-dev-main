{"version":3,"sources":["webpack://project-x/./src/scripts-1r/pages/page-account.js"],"names":["urlPath","window","location","pathname","toLowerCase","urlHash","hash","whenDomReady","console","log","$accountLogin","$","$accountRecover","indexOf","removeClass","on","addClass","ORW","enableGTM","marketing","OneMarketing","Shopify","CountryProvinceSelector","hideElement","length","each","formId","this","data","countrySelector","provinceSelector","containerSelector","$el","confirmMessage","confirm","postLink","parameters","_method","e","currentTarget","$formContainer","fadeToggle","toggleAddressForm","OneContact","el","parent","submitType","errorMsg","successMsg","requiredMsg","errorEmail","onSubmit","$form","find","$dobFieldset","$dobField","dobMonth","val","dobDay","removeAttr","accountForm"],"mappings":"yJAKA,IAAIA,EAAUC,OAAOC,SAASC,SAASC,cACnCC,EAAUJ,OAAOC,SAASI,KAAKF,eAInCG,QAAa,KAIT,GAFAC,QAAQC,IAAI,qBAEG,kBAAXT,EAA6B,CAE7B,IAAIU,EAAgBC,IAAE,0BAClBC,EAAkBD,IAAE,qCACpBN,EAAQQ,QAAQ,YAAc,EAC9BD,EAAgBE,YAAY,QAE5BJ,EAAcI,YAAY,QAG9BH,IAAE,oBAAoBI,GAAG,SAAS,WAC9BH,EAAgBE,YAAY,QAC5BJ,EAAcM,SAAS,OAC3B,IAEAL,IAAE,4BAA4BI,GAAG,SAAS,WACtCL,EAAcI,YAAY,QAC1BF,EAAgBI,SAAS,OAC7B,GAEJ,KAAsB,qBAAXhB,EAEHiB,IAAIC,YACJD,IAAIE,UAAYF,IAAIE,WAAa,IAAIC,KAEvB,0BAAXpB,EAEaW,IAAE,0BACRG,YAAY,QACR,sBAAXd,GAGHqB,UAGA,IAAIA,QAAQC,wBAER,oBACA,qBACA,CACIC,YAAa,gCAIhBZ,IAAE,uBAAuBa,SAE1Bb,IAAE,2BAA2Bc,MAAK,WAC9B,IAAIC,EAASf,IAAEgB,MAAMC,KAAK,WACtBC,EAAkB,kBAAoBH,EACtCI,EAAmB,mBAAqBJ,EACxCK,EAAoB,4BAA8BL,EACtD,IAAIL,QAAQC,wBAAwBO,EAAiBC,EAAkB,CAEnEP,YAAaQ,GAErB,IAGApB,IAAE,mBAAmBI,GAAG,SAAS,WAC7B,IAAIiB,EAAMrB,IAAEgB,MACRD,EAASM,EAAIJ,KAAK,WAClBK,EAAiBD,EAAIJ,KAAK,mBAEzBM,QAAQD,GAAkB,kDAC3BZ,QAAQc,SAAS,sBAAwBT,EAAQ,CAE7CU,WAAY,CAAEC,QAAS,WAGnC,KAWJ1B,IAAE,6CAA6CI,GAAG,SAAS,SAASuB,IAR5C,SAASA,GAC7B,IACIZ,EADQf,IAAE2B,EAAEC,eACGX,KAAK,WACpBY,EAAiB7B,IAAE,gBAAkBe,GACrCc,EAAehB,QACfgB,EAAeC,YAEvB,CAEIC,CAAkBJ,EACtB,KAMRK,SAAgB,CACZC,GAAIjC,IAAE,yBAAyBkC,SAC/BC,WAAY,SACZC,SAAU,QACVC,WAAY,UACZC,YAAa,kBACbC,WAAY,yCACZC,SAAU,SAASb,GACf,IACIc,EADQzC,IAAE2B,EAAEC,eAGhB,GAAIa,EAAMC,KAAK,iBAAiB7B,OAAQ,CACpC,IAAI8B,EAAeF,EAAMC,KAAK,iBAC1BE,EAAYD,EAAaD,KAAK,QAC9BG,EAAWF,EAAaD,KAAK,aAAaI,MAC1CC,EAASJ,EAAaD,KAAK,WAAWI,MACtCD,GAAYE,GACZH,EAAUE,IAAID,EAAW,IAAME,GAAQC,WAAW,WAE1D,CAMA,OAJI1C,IAAIE,WACJF,IAAIE,UAAUyC,YAAYR,IAGvB,CACX,GACF,G","file":"assets/theme.63dd94c59f037255ef67.js","sourcesContent":["import $ from 'jquery';\nimport whenDomReady from 'when-dom-ready';\nimport OneContact from '@/modules/module-oneContact';\nimport OneMarketing from '@/modules/module-oneMarketing';\n\nlet urlPath = window.location.pathname.toLowerCase();\nlet urlHash = window.location.hash.toLowerCase();\n\nimport '../../styles/pages/account.scss';\n\nwhenDomReady(() => {\n    \n    console.log('init account page');\n    \n    if (urlPath == '/account/login') {\n        // Login page\n        var $accountLogin = $('.account.account-login');\n        var $accountRecover = $('.account.account-recover-password');\n        if (urlHash.indexOf(\"recover\") >= 0) {\n            $accountRecover.removeClass('hide');\n        } else {\n            $accountLogin.removeClass('hide');\n        }\n        \n        $('.RecoverPassword').on('click', function(){\n            $accountRecover.removeClass('hide');\n            $accountLogin.addClass('hide');\n        });\n        \n        $('.HideRecoverPasswordLink').on('click', function(){\n            $accountLogin.removeClass('hide');\n            $accountRecover.addClass('hide');\n        });\n        \n    } else if (urlPath == '/account/register') {\n        // Register page\n        if (ORW.enableGTM) {\n            ORW.marketing = ORW.marketing || new OneMarketing;\n        }\n    } else if (urlPath == '/account/invalid_token') {\n        // Reset error page\n        var $accountError = $('.account.account-error');\n        $accountError.removeClass('hide');\n    } else if (urlPath == '/account/addresses') {\n        // Addresses page\n        \n        if (Shopify) {\n            \n            // Initialize observers on address selectors, defined in shopify_common.js\n            new Shopify.CountryProvinceSelector(\n                // eslint-disable-next-line no-new\n                'AddressCountryNew',\n                'AddressProvinceNew',\n                {\n                    hideElement: 'AddressProvinceContainerNew'\n                }\n            );\n            \n            if (!$('.address-list-empty').length) {\n                // Initialize each edit form's country/province selector\n                $('.address-country-option').each(function() {\n                    var formId = $(this).data('form-id');\n                    var countrySelector = 'AddressCountry_' + formId;\n                    var provinceSelector = 'AddressProvince_' + formId;\n                    var containerSelector = 'AddressProvinceContainer_' + formId;\n                    new Shopify.CountryProvinceSelector(countrySelector, provinceSelector, {\n                        // eslint-disable-next-line no-new\n                        hideElement: containerSelector\n                    });\n                });\n                \n                // Initialize each addresses delete action\n                $('.address-delete').on('click', function() {\n                    var $el = $(this);\n                    var formId = $el.data('form-id');\n                    var confirmMessage = $el.data('confirm-message');\n                    \n                    if ( confirm(confirmMessage || 'Are you sure you wish to delete this address?') ) {\n                        Shopify.postLink('/account/addresses/' + formId, {\n                            // eslint-disable-next-line no-alert\n                            parameters: { _method: 'delete' }\n                        });\n                    }\n                });\n            }\n            \n            var toggleAddressForm = function(e){\n                var $curr = $(e.currentTarget);\n                var formId = $curr.data('form-id');\n                var $formContainer = $('#EditAddress_' + formId);\n                if ($formContainer.length) {\n                    $formContainer.fadeToggle();\n                }\n            }\n            $('.address-edit-toggle, .address-new-toggle').on('click', function(e){\n                toggleAddressForm(e);\n            });\n        \n        }\n    }\n\n    // Form validation\n    OneContact.init({\n        el: $('.account-wrapper form').parent(),\n        submitType: 'custom',\n        errorMsg: 'error',\n        successMsg: 'success',\n        requiredMsg: 'Required field.',\n        errorEmail: 'Please provide a correct email address',\n        onSubmit: function(e) {\n            var $curr = $(e.currentTarget);\n            var $form = $curr;\n            \n            if ($form.find('.fieldset.dob').length) {\n                var $dobFieldset = $form.find('.fieldset.dob');\n                var $dobField = $dobFieldset.find('#Dob');\n                var dobMonth = $dobFieldset.find('#DobMonth').val();\n                var dobDay = $dobFieldset.find('#DobDay').val();\n                if (dobMonth && dobDay) {\n                    $dobField.val(dobMonth + '/' + dobDay).removeAttr('disabled');\n                }\n            }\n            \n            if (ORW.marketing) {\n                ORW.marketing.accountForm($form);\n            }\n\n            return true;\n        }\n    });\n    \n});\n\n"],"sourceRoot":""}